import{_ as i,c as a,o as e,ae as n}from"./chunks/framework.-A2PGuvX.js";const g=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"upgrading/v1-to-v2.md","filePath":"upgrading/v1-to-v2.md"}'),t={name:"upgrading/v1-to-v2.md"};function l(h,s,r,o,p,k){return e(),a("div",null,[...s[0]||(s[0]=[n(`<h2 id="upgrading-from-v1-to-v2" tabindex="-1">Upgrading from v1 to v2 <a class="header-anchor" href="#upgrading-from-v1-to-v2" aria-label="Permalink to &quot;Upgrading from v1 to v2&quot;">​</a></h2><h3 id="route-resource-binding" tabindex="-1">Route Resource Binding <a class="header-anchor" href="#route-resource-binding" aria-label="Permalink to &quot;Route Resource Binding&quot;">​</a></h3><p>Commit <code>db70b77</code> introduced significant changes to the route resource binding system to support better caching, parent-to-child inheritance, and non-blocking navigation.</p><h4 id="non-blocking-navigation-breaking-change" tabindex="-1">Non-blocking Navigation (Breaking Change) <a class="header-anchor" href="#non-blocking-navigation-breaking-change" aria-label="Permalink to &quot;Non-blocking Navigation (Breaking Change)&quot;">​</a></h4><p>In v1, navigation was blocked until all resources were resolved in the <code>beforeResolve</code> guard. In v2, navigation proceeds immediately, and resources are loaded in the background.</p><p>This means that your components will now render <strong>before</strong> the resources are available (they will be <code>undefined</code> initially).</p><p><strong>How to upgrade:</strong></p><ol><li><p><strong>Use <code>RouteResourceBoundView</code></strong>: Replace <code>&lt;RouterView&gt;</code> with <code>&lt;RouteResourceBoundView&gt;</code>. This component automatically manages loading and error states for you.</p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { RouteResourceBoundView } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@blueprint-ts/core&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">RouteResourceBoundView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div></li><li><p><strong>Define Loading/Error Components</strong>: You can now define these directly in your <code>defineRoute</code> call to be used by <code>RouteResourceBoundView</code>:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">defineRoute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;{ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">product</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ProductResource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }&gt;()({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;:productId&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    component: ProductDetailPage,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    loadingComponent: MyLoadingSpinner,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    errorComponent: MyErrorPage,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    inject: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        product: { from: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;productId&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, resolve: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div></li><li><p><strong>Manual Handling</strong>: If you want your component to handle its own loading state, set <code>lazy: false</code> in the route definition and use the updated <code>useRouteResource</code> composable.</p></li></ol><h4 id="userouteresource-api-changes-breaking-change" tabindex="-1"><code>useRouteResource</code> API Changes (Breaking Change) <a class="header-anchor" href="#userouteresource-api-changes-breaking-change" aria-label="Permalink to &quot;\`useRouteResource\` API Changes (Breaking Change)&quot;">​</a></h4><p>The <code>useRouteResource</code> composable has been updated to support multiple resources and provide reactive state.</p><ul><li><strong>v1</strong>: <code>const { refresh } = useRouteResource()</code></li><li><strong>v2</strong>: <code>const { refresh, isLoading, error } = useRouteResource(&#39;resourceName&#39;)</code></li></ul><p>The <code>refresh</code> function no longer takes the resource name as an argument. It now accepts an optional options object for silent refreshes.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// v1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">refresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useRouteResource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> refresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;product&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// v2</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">refresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">isLoading</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useRouteResource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;product&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> refresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Triggers loading state</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> refresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ silent: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Background refresh</span></span></code></pre></div><h4 id="new-features-caching-and-inheritance" tabindex="-1">New Features: Caching and Inheritance <a class="header-anchor" href="#new-features-caching-and-inheritance" aria-label="Permalink to &quot;New Features: Caching and Inheritance&quot;">​</a></h4><ul><li><strong>Caching</strong>: Resources are now cached based on the route parameter value. Navigating between child routes that share the same parameter will no longer trigger redundant requests.</li><li><strong>Inheritance</strong>: Child routes now automatically inherit resources defined on parent routes. You can define a resource once on a parent route and it will be available to all children through props or <code>useRouteResource</code>.</li></ul>`,15)])])}const c=i(t,[["render",l]]);export{g as __pageData,c as default};
