import{_ as a,c as s,o as i,ae as n}from"./chunks/framework.-A2PGuvX.js";const g=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"upgrading/v2-to-v3.md","filePath":"upgrading/v2-to-v3.md"}'),o={name:"upgrading/v2-to-v3.md"};function t(d,e,l,r,p,h){return i(),s("div",null,[...e[0]||(e[0]=[n(`<h2 id="upgrading-from-v2-to-v3" tabindex="-1">Upgrading from v2 to v3 <a class="header-anchor" href="#upgrading-from-v2-to-v3" aria-label="Permalink to &quot;Upgrading from v2 to v3&quot;">​</a></h2><h3 id="baseform" tabindex="-1">BaseForm <a class="header-anchor" href="#baseform" aria-label="Permalink to &quot;BaseForm&quot;">​</a></h3><h4 id="omission-of-fields-with-undefined-values-breaking-change" tabindex="-1">Omission of fields with <code>undefined</code> values (Breaking Change) <a class="header-anchor" href="#omission-of-fields-with-undefined-values-breaking-change" aria-label="Permalink to &quot;Omission of fields with \`undefined\` values (Breaking Change)&quot;">​</a></h4><p>Commit <code>26c0d0e</code> changed how <code>BaseForm.buildPayload()</code> handles <code>undefined</code> values returned by transformers (getters).</p><p>In v2, returning <code>undefined</code> from a getter would still include the key in the resulting payload object. In v3, the field is <strong>omitted</strong> entirely from the payload.</p><p>This applies to:</p><ul><li><strong>Field Getters</strong>: <code>getFieldName(value)</code></li><li><strong>Composite Getters</strong>: <code>getParentFieldNestedField(value)</code></li><li><strong>Appended Fields</strong>: Getters for fields defined in the <code>append</code> array.</li><li><strong>Nested Objects/Arrays</strong>: Recursive transformation of nested data structures.</li></ul><p><strong>How to upgrade:</strong> If you previously relied on a field being present with an <code>undefined</code> value in the JS object, you should now return <code>null</code> if you want the field to be included in the request payload.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// v2: payload was { name: undefined }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// v3: payload is {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">protected </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value: string) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> undefined</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// v3: if you want the field to be included</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">protected </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value: string) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // payload is { name: null }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="removal-of-suggestions-breaking-change" tabindex="-1">Removal of Suggestions (Breaking Change) <a class="header-anchor" href="#removal-of-suggestions-breaking-change" aria-label="Permalink to &quot;Removal of Suggestions (Breaking Change)&quot;">​</a></h4><p>The suggestions feature has been removed from <code>BaseForm</code> in commit <code>f21d6ce</code>.</p><p><strong>Changes:</strong></p><ul><li>Removed <code>fillSuggestions()</code> method from <code>BaseForm</code>.</li><li>Removed <code>suggestions</code> property from the <code>properties</code> tree (e.g., <code>form.properties.email.suggestions</code> is no longer available).</li><li>Removed <code>suggestions</code> from <code>PropertyAwareField</code> and <code>PropertyAware</code> types.</li></ul><p><strong>How to upgrade:</strong> If you were using the suggestions feature, you should now manage suggestions independently of the form state, for example, by using a separate reactive object or a dedicated composable.</p><h4 id="file-upload-support-and-form-data-handling" tabindex="-1">File Upload Support and Form Data Handling <a class="header-anchor" href="#file-upload-support-and-form-data-handling" aria-label="Permalink to &quot;File Upload Support and Form Data Handling&quot;">​</a></h4><p>Commit <code>d765cae</code> introduced native support for <code>File</code> and <code>Blob</code> objects in <code>BaseForm</code>.</p><p><strong>Changes:</strong></p><ul><li><code>BaseForm</code> now detects if the payload contains <code>File</code> or <code>Blob</code> objects.</li><li>When sending a request with a <code>File</code> or <code>Blob</code> in the payload, the library will automatically use <code>FormData</code> and set the appropriate <code>Content-Type</code> header (multipart/form-data).</li><li><code>File</code> values are kept intact during the transformation process and are not converted into plain objects.</li></ul>`,18)])])}const u=a(o,[["render",t]]);export{g as __pageData,u as default};
